<div class="container-fluid py-4">
    <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-8">
            <div class="card shadow-sm">
                <div class="card-header" style="background-color: #f8f9fa; border-bottom: 1px solid #e9ecef;">
                    <h4 class="mb-0 text-secondary">{{isEditMode ? 'Edit Employee' : 'Add New Employee'}}</h4>
                </div>
                <div class="card-body p-4">
                    <form [formGroup]="employeeForm" (ngSubmit)="onCreateAccount()">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Full Name</label>
                                <input type="text" class="form-control" formControlName="fullName" placeholder="Enter full name"
                                    [ngClass]="{ 'is-invalid': fullName?.invalid && fullName?.touched }">
                                <div *ngIf="fullName?.invalid && (fullName?.dirty || fullName?.touched)" class="invalid-feedback">
                                    <div *ngIf="fullName?.errors?.['required']">Name is required.</div>
                                    <div *ngIf="fullName?.errors?.['minlength']">Name must be at least 4 characters long.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Email</label>
                                <input type="email" class="form-control" formControlName="email" placeholder="Enter email address"
                                    [ngClass]="{ 'is-invalid': email?.invalid && email?.touched }">
                                <div *ngIf="email?.errors && email?.touched" class="invalid-feedback">
                                    <div *ngIf="email?.errors?.['required']">Email is required.</div>
                                    <div *ngIf="email?.errors?.['email']">Please enter a valid email.</div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Phone</label>
                                <input type="tel" class="form-control" formControlName="phone" placeholder="Enter phone number"
                                    [ngClass]="{ 'is-invalid': phone?.invalid && phone?.touched }">
                                <div *ngIf="phone?.errors && phone?.touched" class="invalid-feedback">
                                    <div *ngIf="phone?.errors?.['required']">Phone is required.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Date of Joining</label>
                                <input type="date" class="form-control" formControlName="dateOfJoining"
                                    [ngClass]="{ 'is-invalid': dateOfJoining?.invalid && dateOfJoining?.touched }">
                                <div *ngIf="!dateOfJoining?.value && dateOfJoining?.touched" class="invalid-feedback d-block">
                                    Enter valid date
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Gender</label>
                                <div class="mt-2">
                                    <div class="form-check form-check-inline" *ngFor="let genderOption of gender; let i = index">
                                        <input class="form-check-input" type="radio" [value]="genderOption" formControlName="gender" [id]="'gender' + i">
                                        <label class="form-check-label cursor-pointer" [for]="'gender' + i">{{genderOption}}</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Employee Type</label>
                                <input type="text" class="form-control" formControlName="employeeType" placeholder="Enter employee type"
                                    [ngClass]="{ 'is-invalid': employeeType?.invalid && employeeType?.touched }">
                                <div *ngIf="employeeType?.errors && employeeType?.touched" class="invalid-feedback">
                                    <div *ngIf="employeeType?.errors?.['required']">Employee type is required.</div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Department</label>
                                <select formControlName="departmentId" class="form-select" (change)="onDepartmentChange($event)"
                                    [ngClass]="{ 'is-invalid': departmentId?.invalid && departmentId?.touched }">
                                    <option value="" disabled selected>Select Department</option>
                                    <option *ngFor="let item of departments" value="{{item.departmentId}}">
                                        {{item.departmentName}}
                                    </option>
                                </select>
                                <div *ngIf="departmentId?.touched && departmentId?.errors?.['required']" class="invalid-feedback d-block">
                                    Please select department
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Designation</label>
                                <select formControlName="designationId" class="form-select"
                                    [ngClass]="{ 'is-invalid': designationId?.invalid && designationId?.touched }">
                                    <option value="" disabled selected>Select Designation</option>
                                    <option *ngFor="let item of designation" value="{{item.designationId}}">
                                        {{item.designationName}}
                                    </option>
                                </select>
                                <div *ngIf="designationId?.touched || designationId?.dirty" class="invalid-feedback d-block">
                                    <span *ngIf="!departmentId?.value">Please select department first</span>
                                    <span *ngIf="departmentId?.value && designationId?.errors?.['required']">Please select designation</span>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-secondary">Salary</label>
                                <input type="number" class="form-control" formControlName="salary" placeholder="Enter salary"
                                    [ngClass]="{ 'is-invalid': salary?.invalid && salary?.touched }">
                                <div *ngIf="salary?.errors && salary?.touched" class="invalid-feedback">
                                    <div *ngIf="salary?.errors?.['required']">Salary is required.</div>
                                    <div *ngIf="salary?.errors?.['min']">Salary must be greater than 0.</div>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center gap-3">
                            <button type="button" class="btn btn-outline-secondary px-4" [routerLink]="['/home/employee/employeeList']">
                                Cancel
                            </button>
                            <button type="submit" class="btn px-4" style="background-color: #28a745; border-color: #28a745; color: white;" [disabled]="employeeForm.invalid">
                                {{isEditMode ? 'Update Employee' : 'Create Employee'}}
                            </button>
                        </div>

                        <div *ngIf="employeeFormValid && employeeForm.invalid" class="alert mt-3" style="background-color: #f8d7da; border-color: #f5c6cb; color: #721c24;">
                            Please fill all required fields correctly.
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>